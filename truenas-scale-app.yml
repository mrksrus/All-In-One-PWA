# TrueNAS Scale Custom App Configuration
# Use this YAML in the "Custom App" wizard or paste into the YAML editor
# This is a simplified version for TrueNAS Scale's Docker-based app system


services:
  all-in-one-pwa:
    image: ghcr.io/mrksrus/all-in-one-pwa:latest
    container_name: all-in-one-pwa
    restart: unless-stopped
    ports:
      - "3000:3000"  # Change the first number (host port) if needed
    environment:
      - NODE_ENV=production
      - PORT=3000
      - DB_PATH=/data/database.sqlite
      - CORS_ORIGIN=*  # Update to your TrueNAS Scale IP/domain
      # Secrets are auto-generated on first run, but you can set them here:
      # - JWT_SECRET=your-secret-here
      # - JWT_REFRESH_SECRET=your-refresh-secret-here
      # - ENCRYPTION_KEY=your-encryption-key-here
    volumes:
      - /mnt/your-pool/app-data/all-in-one-pwa:/data
      # Replace /mnt/your-pool/app-data/all-in-one-pwa with your actual dataset path
      # Example: /mnt/pool1/apps/all-in-one-pwa:/data
